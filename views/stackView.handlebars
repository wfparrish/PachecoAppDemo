{{!-- Present this data as tables using Material UI. 
This is where they will parse and display data professionally, in 
a structure that could be transported to another program. --}}

<script>
  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      // Typical action to be performed when the document is ready:
       let stacks = JSON.parse(xhttp.responseText);
    let table = document.createElement('table');

    function addHeaders(table, keys) {
      let row = table.insertRow();
      for ( let idx = 0; idx < keys.length; idx++) {
        let cell = row.insertCell();
        cell.appendChild(document.createTextNode(keys[idx]));
        cell.style.border = '1px solid #000';
        cell.style.padding = '10px';
      }
    }

    for (let idx = 0; idx < stacks.length; idx++) {
      let stack = stacks[idx];
      if(idx === 0) {
        addHeaders(table, Object.keys(stack));
      }

      let row = table.insertRow();
      Object.keys(stack).forEach(function(k) {
        let cell = row.insertCell();
        cell.appendChild(document.createTextNode(stack[k]));
        cell.style.border = '1px solid #000';
        cell.style.padding = '2px';

      });
    }

    document.getElementById('container').appendChild(table);
    console.log(table);
    }
  };

  xhttp.open("GET", "http://localhost:3000/api/stacks", true);
  xhttp.send();

  document.createElement('table')
</script>

<div id='container'></div>
